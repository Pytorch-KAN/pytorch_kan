/* Professional styles for PyTorch KAN documentation */

/* Fix blank space at the top of the page */
body {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

html {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Target specific elements that might cause top spacing */
.bd-header-article, .bd-header {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Force the header to the very top */
.bd-header, header {
    top: 0 !important;
    position: relative !important;
    margin-top: -1px !important; /* Force negative margin to eliminate any gap */
}

/* Target the specific header element causing the issue */
header.bd-header.navbar.navbar-expand-lg.bd-navbar.d-print-none.noprint {
    display: none !important; /* Hide the problematic header completely */
}

/* Target the sphinx-book-theme specific header container */
.bd-container-outer, .bd-container, .bd-page-width {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Remove any announcement container space */
.bd-header-announcement {
    display: none !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Target any remaining top elements */
.bd-header-article::before,
.bd-header::before,
.bd-page-width::before,
body::before {
    display: none !important;
    height: 0 !important;
    content: "" !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Force the document to start at the absolute top */
:root {
    --pst-header-height: 0 !important;
}

/* Ensure logo has transparent background and increase size */
.navbar-brand img {
    background-color: transparent !important;
    mix-blend-mode: multiply; /* This helps with transparency in light mode */
    height: 250px !important; /* Increase height to 250px */
    width: auto !important;
    max-width: none !important;
    margin: 10px 0 !important; /* Add some vertical spacing */
    transform: scale(2.5) !important; /* Apply much larger scaling */
    transform-origin: center center !important;
}

/* Make sure the navbar has enough height to accommodate the larger logo */
.navbar-brand {
    height: auto !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 auto !important; /* Center the brand in the navbar */
    max-width: 100% !important;
}

/* Ensure the navbar has enough height and fix horizontal spacing */
.bd-navbar {
    min-height: 300px !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    width: 100% !important;
    overflow: hidden !important; /* Prevent horizontal overflow */
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    position: relative !important;
}

/* Fix container width to prevent horizontal scrolling */
.container-xl, .container-fluid {
    max-width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    overflow-x: hidden !important;
    margin-top: 0 !important;
}

/* Fix main content spacing with negative margins */
.bd-main {
    padding-top: 0 !important;
    margin-top: -30px !important; /* Use negative margin to pull content up */
}

/* Remove space between search bar and content - extremely aggressive */
.bd-search-container,
.bd-sidebar-primary,
.bd-sidebar-secondary,
.bd-sidebar,
.bd-sidebar-content,
.bd-sidebar-primary .sidebar-primary-items__start,
.bd-sidebar-primary .sidebar-primary-items__end,
.bd-sidebar-primary .sidebar-primary-items__start + div,
.bd-sidebar-primary .sidebar-primary-items__end + div,
.bd-sidebar-primary .sidebar-primary-items__start > div,
.bd-sidebar-primary .sidebar-primary-items__end > div,
.bd-sidebar-primary .sidebar-primary-items__start > div > div,
.bd-sidebar-primary .sidebar-primary-items__end > div > div,
.bd-sidebar-primary .sidebar-primary-items__start > div > div > div,
.bd-sidebar-primary .sidebar-primary-items__end > div > div > div,
.bd-sidebar-primary .sidebar-primary-items__start > div > div > div > div,
.bd-sidebar-primary .sidebar-primary-items__end > div > div > div > div {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}

/* Target search elements specifically */
.search-button__wrapper, 
.search-button__wrapper + div,
.search-button__wrapper > div,
.search-button__wrapper + div > div,
.bd-search,
.bd-search > div,
.bd-search > form,
.bd-search > form > div,
.bd-search > form > div > div {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
}

/* Fix spacing between search and main content - extremely aggressive */
.bd-main,
.bd-main .bd-content,
.bd-main > div,
.bd-main > div > div,
.bd-main > div > div > div,
.bd-content > div,
.bd-content > div > div,
.bd-content > div > div > div,
.bd-content > article,
.bd-content > article > div,
.bd-content > article > div > div,
.bd-content > article > div > div > div,
.bd-content > article > div > div > div > div,
.bd-content > article > div > div > div > div > div,
.bd-content > article > div > div > div > div > div > div,
.bd-content > article > div > div > div > div > div > div > div,
.bd-content > article > div > div > div > div > div > div > div > div {
    padding-top: 0 !important;
    margin-top: 0 !important;
    border-top: 0 !important;
}

.bd-article-container,
.bd-article,
.bd-article > div,
.bd-article > div > div,
.bd-article > div > div > div,
.bd-article > div > div > div > div,
.bd-article > div > div > div > div > div,
.bd-article > div > div > div > div > div > div,
.bd-article > div > div > div > div > div > div > div {
    padding-top: 0 !important;
    margin-top: 0 !important;
    border-top: 0 !important;
}

/* Target sphinx-book-theme specific elements - direct targeting */
.bd-sidebar-primary {
    margin-top: 0 !important;
}

.bd-sidebar-secondary {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Remove space between title and content */
.bd-header + .bd-container {
    margin-top: 0 !important;
}

/* Remove space in the article container */
.bd-article {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Target specific elements that might be causing spacing */
.bd-toc,
.toc-entry,
.toc-item,
.toc-h1, .toc-h2, .toc-h3, .toc-h4, .toc-h5, .toc-h6,
.section,
.section > *,
.section > * > *,
.section > * > * > *,
.section > * > * > * > *,
.section > * > * > * > * > *,
.section > * > * > * > * > * > *,
.section > * > * > * > * > * > * > *,
.section > * > * > * > * > * > * > * > *,
.section > * > * > * > * > * > * > * > * > * {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Target the first element of any container to remove top spacing */
.bd-content > :first-child,
.bd-article > :first-child,
.bd-article-container > :first-child,
.section > :first-child,
.section > * > :first-child,
.section > * > * > :first-child,
.section > * > * > * > :first-child,
.section > * > * > * > * > :first-child,
.section > * > * > * > * > * > :first-child,
.section > * > * > * > * > * > * > :first-child {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Remove any top spacing from the page */
.bd-page-width {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

/* Fix top spacing in the entire document */
#main-content, .bd-content {
    padding-top: 0 !important;
    margin-top: 0 !important;
}

.navbar-logo {
    background-color: transparent !important;
}

.navbar-brand {
    background-color: transparent !important;
}

/* Dark mode specific logo handling */
html[data-theme="dark"] .navbar-brand img {
    mix-blend-mode: screen; /* This helps with transparency in dark mode */
    filter: brightness(1.2) contrast(1.2); /* Improve visibility in dark mode */
}

/* Dark mode color overrides */
html[data-theme="dark"] {
    --kan-text: #E0E0E0;
    --kan-text-light: #AAAAAA;
    --kan-background: #1A1F36;
    --kan-sidebar-bg: #151A30;
    --kan-sidebar-text: #E0E0E0;
    --kan-header-bg: #151A30;
    --kan-header-text: #E0E0E0;
    --kan-code-bg: #252A40;
    --kan-code-border: #353A50;
    --kan-border: #353A50;
}

/* Ensure consistent colors throughout the site */
.bd-content {
    color: var(--kan-text) !important;
}

/* Fix color consistency when navigating between pages - prevent flash */
body.no-transitions *, html.no-transitions * {
    transition: none !important; /* Remove all transitions during page load */
    animation: none !important;
}

/* Apply colors immediately to prevent flash during navigation */
body {
    color: var(--kan-text) !important;
    background-color: var(--kan-background) !important;
}

/* Force immediate application of theme colors */
html[data-theme="light"] {
    color-scheme: light;
}

html[data-theme="dark"] {
    color-scheme: dark;
}

/* Ensure consistent colors on page load and navigation */
.bd-main .bd-content {
    color: var(--kan-text) !important;
    background-color: var(--kan-background) !important;
}

/* Prevent any theme transitions */
.bd-container,
.bd-sidebar,
.bd-content,
.bd-header,
.bd-footer {
    transition: none !important;
}

/* Ensure sidebar has consistent colors */
.bd-sidebar {
    background-color: var(--kan-sidebar-bg) !important;
    color: var(--kan-sidebar-text) !important;
}

/* Ensure consistent header colors */
.bd-header {
    background-color: var(--kan-header-bg) !important;
    color: var(--kan-header-text) !important;
}

/* Ensure all links have consistent color */
a {
    color: var(--kan-primary) !important;
    transition: color 0.2s ease;
}

a:hover {
    color: var(--kan-primary-dark) !important;
}

:root {
  /* Modern professional color palette */
  --kan-primary: #4A6FE3;        /* Primary blue color */
  --kan-primary-light: #6B8FF5;  /* Lighter blue for hover states */
  --kan-primary-dark: #3A5FC3;   /* Darker blue for active states */
  --kan-secondary: #5D5FEF;      /* Secondary purple color */
  --kan-accent: #FF6B6B;         /* Accent red for highlights */
  --kan-text: #333333;           /* Main text color */
  --kan-text-light: #666666;     /* Secondary text color */
  --kan-background: #FFFFFF;     /* Main background color */
  --kan-border: #E0E0E0;         /* Border color */
  --kan-code-bg: #F5F7F9;        /* Code block background */
  --kan-code-border: #E0E4E9;    /* Code block border */
  --kan-sidebar-bg: #F5F7F9;     /* Sidebar background color */
  --kan-sidebar-text: #333333;   /* Sidebar text color */
  --kan-header-bg: #FFFFFF;      /* Header background color */
  --kan-header-text: #333333;    /* Header text color */
  --kan-nav-text: #FFFFFF;       /* Bright white for maximum contrast */
  --kan-caption-text: #FFD479;   /* Warm yellow for "Contents" heading */
  
  /* Additional colors for enhanced UI */
  --kan-success: #38A169;        /* Success green */
  --kan-warning: #F6AD55;        /* Warning orange */
  --kan-danger: #E53E3E;         /* Danger red */
  --kan-info: #63B3ED;           /* Info blue */
  --kan-muted: #718096;          /* Muted gray */
  --kan-gradient-start: #4A6FE3; /* Gradient start color */
  --kan-gradient-end: #8C54FF;   /* Gradient end color */
}

/* Dark mode color variables */
html[data-theme="dark"] {
  --kan-primary: #4c6ef5;        /* Brighter blue for dark mode */
  --kan-secondary: #8c54ff;      /* Brighter purple for dark mode */
  --kan-accent: #a3bffa;         /* Lighter accent for dark mode */
  --kan-light: #1a202c;          /* Dark background */
  --kan-dark: #e2e8f0;           /* Light text */
  --kan-code-bg: #2d3748;        /* Dark code background */
  --kan-link: #63b3ed;           /* Brighter link color for dark mode */
  --kan-link-hover: #b794f4;     /* Link hover color */
  --kan-border: #4a5568;         /* Darker border color */
  --kan-shadow: rgba(0, 0, 0, 0.3);  /* Darker shadow */
  --kan-nav-text: #e2e8f0;       /* Light text for nav */
  --kan-caption-text: #fbd38d;   /* Warmer yellow for captions */
  --kan-success: #68d391;        /* Success green for dark mode */
  --kan-warning: #f6ad55;        /* Warning orange */
  --kan-danger: #fc8181;         /* Danger red */
  --kan-info: #63b3ed;           /* Info blue */
  --kan-muted: #a0aec0;          /* Muted gray */
  --kan-gradient-start: #4c6ef5; /* Gradient start color */
  --kan-gradient-end: #8c54ff;   /* Gradient end color */
}

/* Global styles */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
  color: var(--kan-dark);
  line-height: 1.6;
  font-size: 16px;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Import Inter font */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap');

/* Increased logo size and styling */
.wy-side-nav-search .icon-home {
  display: block;
  font-size: 1em;
  color: #ffffff;
  margin-bottom: 0.8em;
}

.wy-side-nav-search > a img.logo {
  /* Increased logo size */
  width: auto;
  height: auto;
  max-width: 70%;
  max-height: none;
  margin: 0 auto;
  padding: 10px 0;
}

/* Enhanced Logo and Sidebar styling */
.logo-only-link {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 25px 5px 15px;
  text-decoration: none;
  transition: opacity 0.2s ease;
}

.logo-only-link:hover {
  opacity: 0.9;
}

.logo-large {
  width: auto;
  max-width: 120px;
  height: auto;
  margin: 0 auto 10px;
}

.project-name {
  font-size: 1.4rem;
  font-weight: 700;
  color: white;
  margin-top: 5px;
  letter-spacing: -0.02em;
}

.version-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 20px;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  padding: 5px 12px;
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
}

.version-label {
  color: rgba(255, 255, 255, 0.9);
  font-size: 0.85rem;
  font-weight: 600;
}

.version-link {
  color: rgba(255, 255, 255, 0.7);
  margin-left: 5px;
  font-size: 0.8rem;
  transition: color 0.2s ease;
}

.version-link:hover {
  color: white;
}

.sidebar-links {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 15px;
  margin-bottom: 20px;
}

.sidebar-link {
  color: rgba(255, 255, 255, 0.8);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  padding: 5px 10px;
  border-radius: 5px;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 5px;
}

.sidebar-link:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
}

.sidebar-link i {
  font-size: 1rem;
}

.active-link {
  background-color: var(--kan-primary) !important;
  color: white !important;
  font-weight: 600 !important;
}

/* Hide the project name text that might appear elsewhere */
.wy-side-nav-search .icon-home::before {
  content: none !important;
}

.wy-side-nav-search .version {
  margin-top: 15px;
}

/* Header styling with KAN branding */
.wy-side-nav-search {
  background-color: var(--kan-secondary);
}

.wy-side-nav-search > a {
  color: #fff;
  font-weight: 700;
  font-size: 1.3em;
  padding: 0;
  margin: 0;
}

/* Remove any text that might appear with logo */
.wy-side-nav-search > a .fa,
.wy-side-nav-search > a::before {
  display: none;
}

/* Improve navigation appearance */
.wy-menu-vertical {
  background-color: var(--kan-secondary);
}

/* Special styling for caption text in navigation */
.wy-menu-vertical p.caption {
  color: var(--kan-caption-text);
  font-weight: 700;
  font-size: 1.05em;
  margin-top: 10px;
  margin-bottom: 5px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.wy-menu-vertical .caption-text {
  color: var(--kan-caption-text);
}

/* Improved navigation text contrast - NOW WITH MAXIMUM CONTRAST */
.wy-menu-vertical a {
  color: var(--kan-nav-text);  /* Pure white for maximum contrast */
  opacity: 1;  /* Full opacity for better visibility */
  transition: background-color 0.2s ease;
  font-weight: 600;  /* Bolder text for better visibility */
  letter-spacing: 0.02em;  /* Slightly increased letter spacing for readability */
}

.wy-menu-vertical li.toctree-l1.current > a {
  border-color: var(--kan-primary);
  background-color: var(--kan-primary);
  color: white;
}

.wy-menu-vertical li.current > a.current {
  background-color: var(--kan-primary);
  color: white;
}

.wy-menu-vertical a:hover {
  background-color: rgba(255, 255, 255, 0.2);  /* More visible hover state */
  color: white;
}

/* Highlight current section in navigation */
.wy-menu-vertical li.current {
  background-color: rgba(255, 255, 255, 0.1);  /* Slightly lighter background for current section */
}

.wy-menu-vertical li.current > a {
  background-color: var(--kan-primary);
  color: white;
  font-weight: 700;  /* Make current selection even bolder */
}

.wy-menu-vertical li.current > a:hover {
  background-color: var(--kan-primary);
}

/* Make nested navigation more visible */
.wy-menu-vertical li.toctree-l2 a,
.wy-menu-vertical li.toctree-l3 a,
.wy-menu-vertical li.toctree-l4 a {
  color: #FFFFFF;  /* Pure white for maximum contrast */
  font-weight: 500;  /* Slightly less bold than parent items but still bold enough */
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.5);  /* Text shadow for extra readability */
}

.wy-menu-vertical li.toctree-l2.current > a,
.wy-menu-vertical li.toctree-l3.current > a,
.wy-menu-vertical li.toctree-l4.current > a {
  color: white;
  background-color: rgba(74, 111, 227, 0.8);  /* Slightly transparent primary color */
}

/* Indent nested navigation items more clearly */
.wy-menu-vertical li.toctree-l1.current > a { padding-left: 1.0em; background-color: var(--kan-primary); }
.wy-menu-vertical li.toctree-l2.current > a { padding-left: 2.0em; }
.wy-menu-vertical li.toctree-l3.current > a { padding-left: 3.0em; }
.wy-menu-vertical li.toctree-l4.current > a { padding-left: 4.0em; }

.wy-menu-vertical li.toctree-l1 > a { padding-left: 1.0em; }
.wy-menu-vertical li.toctree-l2 > a { padding-left: 2.0em; }
.wy-menu-vertical li.toctree-l3 > a { padding-left: 3.0em; }
.wy-menu-vertical li.toctree-l4 > a { padding-left: 4.0em; }

/* Updated navigation header background */
.wy-nav-top {
  background-color: var(--kan-secondary);
}

/* Make code blocks have a light background with proper contrast */
.highlight {
  background: var(--kan-code-bg);
  border-radius: 6px;
  border: 1px solid var(--kan-border);
  box-shadow: 0 2px 4px var(--kan-shadow);
  margin: 20px 0;
}

/* Copybutton styling */
.copybutton {
  opacity: 0.3;
  transition: opacity 0.2s ease;
}

.highlight:hover .copybutton {
  opacity: 1;
}

/* Improve appearance of class and function signatures */
.sig {
  background-color: #f0f8ff;
  border-left: 3px solid var(--kan-primary);
  border-radius: 3px;
  padding: 12px 15px;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px var(--kan-shadow);
}

/* Make parameter names stand out in function signatures */
.sig-param {
  font-weight: 500;
}

.sig-name {
  color: var(--kan-primary);
  font-weight: 600;
}

/* Improve math formula appearance */
.math {
  font-size: 1.05em;
  overflow-x: auto;
  padding: 2px 0;
}

/* Enhanced admonitions with modern styling */
.admonition {
  border-radius: 10px;
  margin: 35px 0;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
  border: none;
  overflow: hidden;
  position: relative;
  background-color: white;
}

.admonition-title {
  text-transform: uppercase;
  font-size: 0.85em;
  letter-spacing: 0.1em;
  padding: 15px 20px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 8px;
}

.admonition-title::before {
  font-family: "Font Awesome 5 Free";
  font-weight: 900;
  font-size: 1.2em;
}

.admonition-body {
  padding: 20px;
  font-size: 1.05em;
  line-height: 1.7;
}

/* Note admonition */
.admonition.note {
  border-left: 5px solid var(--kan-primary);
}
.admonition.note .admonition-title {
  background-color: rgba(74, 111, 227, 0.1);
  color: var(--kan-primary);
}
.admonition.note .admonition-title::before {
  content: "\f05a";
  color: var(--kan-primary);
}

/* Warning admonition */
.admonition.warning {
  border-left: 5px solid var(--kan-danger);
}
.admonition.warning .admonition-title {
  background-color: rgba(229, 62, 62, 0.1);
  color: var(--kan-danger);
}
.admonition.warning .admonition-title::before {
  content: "\f071";
  color: var(--kan-danger);
}

/* Tip admonition */
.admonition.tip {
  border-left: 5px solid var(--kan-success);
}
.admonition.tip .admonition-title {
  background-color: rgba(56, 161, 105, 0.1);
  color: var(--kan-success);
}
.admonition.tip .admonition-title::before {
  content: "\f0eb";
  color: var(--kan-success);
}

/* Modern code examples with syntax highlighting improvements - color palette aligned */
pre {
  font-size: 15px;
  line-height: 1.6;
  padding: 20px;
  border-radius: 8px;
  border: none;
  background-color: #f0f4fc !important; /* Lighter shade of primary color */
  box-shadow: 0 3px 15px rgba(74, 111, 227, 0.08), inset 0 0 0 1px rgba(74, 111, 227, 0.1);
  margin: 25px 0;
  position: relative;
  overflow: auto;
}

code {
  font-family: 'Fira Code', 'Source Code Pro', 'Consolas', 'Monaco', 'Menlo', monospace;
  font-size: 90%;
  background-color: rgba(74, 111, 227, 0.05); /* Very light primary color */
  padding: 3px 6px;
  border-radius: 4px;
  font-feature-settings: "liga" 1;
  border: 1px solid rgba(74, 111, 227, 0.1);
  color: var(--kan-dark);
}

/* Code block title */
pre::before {
  content: attr(data-language);
  position: absolute;
  top: 0;
  right: 0;
  padding: 5px 10px;
  font-size: 12px;
  font-weight: 600;
  color: var(--kan-primary);
  background: rgba(74, 111, 227, 0.1);
  border-bottom-left-radius: 6px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Syntax highlighting enhancements - aligned with color palette */
.highlight .k, .highlight .kd { color: var(--kan-primary); font-weight: bold; } /* Keyword */
.highlight .n { color: #2D3748; } /* Name - darker for better contrast */
.highlight .o { color: #4A5568; } /* Operator - better contrast */
.highlight .s, .highlight .s1, .highlight .s2 { color: #38A169; } /* String - using success color */
.highlight .c, .highlight .c1 { color: #718096; font-style: italic; } /* Comment - using muted color */
.highlight .nb { color: var(--kan-accent); } /* Name.Builtin - using accent color */
.highlight .nf { color: #805AD5; font-weight: bold; } /* Name.Function - purple tone */
.highlight .nn { color: #3182CE; } /* Name.Namespace - blue tone */
.highlight .mi { color: #DD6B20; } /* Literal.Number.Integer - orange tone */
.highlight .bp { color: var(--kan-accent); } /* Name.Builtin.Pseudo */
.highlight .nc { color: #805AD5; font-weight: bold; } /* Name.Class */
.highlight .nd { color: #3182CE; } /* Name.Decorator */
.highlight .ne { color: #E53E3E; font-weight: bold; } /* Name.Exception */
.highlight .nl { color: #3182CE; } /* Name.Label */
.highlight .nt { color: var(--kan-primary); } /* Name.Tag */
.highlight .ow { color: var(--kan-primary); font-weight: bold; } /* Operator.Word */
.highlight .w { color: #EDF2F7; } /* Text.Whitespace */

/* Add subtle gradient to code blocks */
pre.highlight {
  background: linear-gradient(to bottom right, #f0f4fc, #f8f9ff) !important;
  border-left: 3px solid var(--kan-primary);
}

/* Dark mode support for code blocks */
html[data-theme="dark"] pre {
  background-color: #1a1f36 !important; /* Dark blue background */
  box-shadow: 0 3px 15px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1);
  color: #e2e8f0;
}

html[data-theme="dark"] code {
  background-color: rgba(255, 255, 255, 0.07);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #e2e8f0;
}

html[data-theme="dark"] pre::before {
  color: #a3bffa;
  background: rgba(255, 255, 255, 0.1);
}

html[data-theme="dark"] pre.highlight {
  background: linear-gradient(to bottom right, #1a1f36, #2d3748) !important;
  border-left: 3px solid #a3bffa;
}

/* Dark mode syntax highlighting */
html[data-theme="dark"] .highlight .k, 
html[data-theme="dark"] .highlight .kd { color: #a3bffa; font-weight: bold; } /* Keyword */
html[data-theme="dark"] .highlight .n { color: #e2e8f0; } /* Name */
html[data-theme="dark"] .highlight .o { color: #cbd5e0; } /* Operator */
html[data-theme="dark"] .highlight .s, 
html[data-theme="dark"] .highlight .s1, 
html[data-theme="dark"] .highlight .s2 { color: #68d391; } /* String */
html[data-theme="dark"] .highlight .c, 
html[data-theme="dark"] .highlight .c1 { color: #a0aec0; font-style: italic; } /* Comment */
html[data-theme="dark"] .highlight .nb { color: #d6bcfa; } /* Name.Builtin */
html[data-theme="dark"] .highlight .nf { color: #b794f4; font-weight: bold; } /* Name.Function */
html[data-theme="dark"] .highlight .nn { color: #90cdf4; } /* Name.Namespace */
html[data-theme="dark"] .highlight .mi { color: #fbd38d; } /* Literal.Number.Integer */
html[data-theme="dark"] .highlight .bp { color: #d6bcfa; } /* Name.Builtin.Pseudo */
html[data-theme="dark"] .highlight .nc { color: #b794f4; font-weight: bold; } /* Name.Class */
html[data-theme="dark"] .highlight .nd { color: #90cdf4; } /* Name.Decorator */
html[data-theme="dark"] .highlight .ne { color: #fc8181; font-weight: bold; } /* Name.Exception */
html[data-theme="dark"] .highlight .nl { color: #90cdf4; } /* Name.Label */
html[data-theme="dark"] .highlight .nt { color: #a3bffa; } /* Name.Tag */
html[data-theme="dark"] .highlight .ow { color: #a3bffa; font-weight: bold; } /* Operator.Word */
html[data-theme="dark"] .highlight .w { color: #2d3748; } /* Text.Whitespace */

/* Modern tables with improved readability */
table.docutils {
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
  margin: 30px 0;
  border: 1px solid var(--kan-border);
  border-collapse: separate;
  border-spacing: 0;
  overflow: hidden;
  width: 100%;
}

/* Enhanced table headers */
table.docutils th {
  background: linear-gradient(to bottom, #f8fafc, #edf2f7);
  padding: 16px 20px;
  text-align: left;
  font-weight: 700;
  border-bottom: 2px solid var(--kan-border);
  color: var(--kan-dark);
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

table.docutils td {
  padding: 14px 20px;
  border-bottom: 1px solid var(--kan-border);
  vertical-align: middle;
  line-height: 1.6;
}

table.docutils tr:nth-child(even) {
  background-color: rgba(0, 0, 0, 0.01);
}

table.docutils tr:hover {
  background-color: rgba(74, 111, 227, 0.03);
}

table.docutils tr:last-child td {
  border-bottom: none;
}

/* Responsive tables */
@media (max-width: 768px) {
  .table-responsive {
    display: block;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* Improve appearance of search box */
.wy-side-nav-search input[type="text"] {
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  padding: 10px 12px;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
}

/* Improve hyperlink appearance */
a {
  color: var(--kan-link);
  text-decoration: none;
  transition: color 0.2s ease;
}

a:hover {
  color: var(--kan-link-hover);
  text-decoration: underline;
}

/* Button styling */
.btn {
  border-radius: 4px;
  padding: 8px 16px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.btn-neutral {
  background-color: var(--kan-light) !important;
  color: var(--kan-dark) !important;
  border: 1px solid var(--kan-border);
}

.btn-neutral:hover {
  background-color: #fff !important;
  box-shadow: 0 2px 5px var(--kan-shadow);
}

/* Enhanced Footer styles */
footer {
  margin-top: 60px;
}

.footer {
  background-color: #f8f9fa;
  border-top: 1px solid var(--kan-border);
  padding: 40px 20px 20px;
  color: var(--kan-dark);
  font-size: 0.95rem;
}

.footer-top {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 30px;
  margin-bottom: 30px;
}

.footer-column h4 {
  font-size: 1.1rem;
  margin-top: 0;
  margin-bottom: 15px;
  color: var(--kan-primary);
  font-weight: 600;
}

.footer-column ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-column li {
  margin-bottom: 8px;
}

.footer-column a {
  color: var(--kan-dark);
  text-decoration: none;
  transition: color 0.2s ease;
}

.footer-column a:hover {
  color: var(--kan-primary);
  text-decoration: none;
}

.footer-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 20px;
  border-top: 1px solid var(--kan-border);
  font-size: 0.9rem;
  color: var(--kan-muted);
}

.footer-bottom a {
  color: var(--kan-primary);
  text-decoration: none;
}

@media (max-width: 768px) {
  .footer-bottom {
    flex-direction: column;
    text-align: center;
    gap: 10px;
  }
  
  .footer-top {
    grid-template-columns: 1fr;
  }
}

/* Responsive improvements */
@media screen and (max-width: 768px) {
  .wy-nav-content {
    padding: 1.5em;
  }
  
  pre {
    font-size: 13px;
    padding: 12px;
  }
  
  .admonition {
    margin: 20px 0;
  }
  
  /* Ensure logo is still visible on mobile */
  .wy-nav-top img {
    max-width: 50px;
    height: auto;
  }
}

/* PyTorch KAN branded header - modern gradient */
.pytorch-kan-header {
  background: linear-gradient(135deg, var(--kan-gradient-start) 0%, var(--kan-gradient-end) 100%);
  color: white;
  padding: 4rem 3rem;
  margin-bottom: 3rem;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  position: relative;
  overflow: hidden;
}

/* Dark mode header adjustments */
html[data-theme="dark"] .pytorch-kan-header {
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

/* Add subtle pattern overlay */
.pytorch-kan-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  z-index: 0;
}

.pytorch-kan-header h1 {
  font-size: 3rem;
  margin-bottom: 1.5rem;
  font-weight: 800;
  letter-spacing: -0.03em;
  position: relative;
  z-index: 1;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.pytorch-kan-header p {
  font-size: 1.25rem;
  max-width: 650px;
  opacity: 0.95;
  line-height: 1.7;
  position: relative;
  z-index: 1;
  margin-bottom: 2rem;
}

/* Feature section for homepage - modern grid layout */
.feature-section {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
  margin: 60px 0;
}

.feature-card {
  padding: 35px 30px;
  border-radius: 12px;
  background-color: white;
  box-shadow: 0 5px 20px var(--kan-shadow);
  transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
  border-top: 4px solid transparent;
  position: relative;
  z-index: 1;
}

/* Dark mode feature cards */
html[data-theme="dark"] .feature-card {
  background-color: #2d3748;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
  color: var(--kan-dark);
}

html[data-theme="dark"] .feature-card p {
  color: #a0aec0;
}

html[data-theme="dark"] .feature-card:hover {
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
}

.feature-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
  border-top-color: var(--kan-primary);
}

.feature-card::before {
  content: '';
  position: absolute;
  z-index: -1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 12px;
  background: linear-gradient(to bottom right, var(--kan-gradient-start), var(--kan-gradient-end));
  opacity: 0;
  transition: opacity 0.4s ease;
}

.feature-card:hover::before {
  opacity: 0.05;
}

.feature-card h3 {
  color: var(--kan-primary);
  font-size: 1.5rem;
  margin-top: 0;
  margin-bottom: 20px;
  font-weight: 700;
  position: relative;
}

.feature-card h3::after {
  content: '';
  display: block;
  width: 50px;
  height: 3px;
  background: linear-gradient(to right, var(--kan-primary), var(--kan-accent));
  margin-top: 15px;
  border-radius: 3px;
}

.feature-card p {
  color: var(--kan-muted);
  line-height: 1.7;
  font-size: 1.05rem;
}

/* Custom badge styling with updated colors */
.badge {
  display: inline-block;
  padding: 4px 8px;
  font-size: 12px;
  font-weight: 600;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-right: 8px;
}

.badge-api {
  background-color: var(--kan-primary);
  color: white;
}

.badge-tutorial {
  background-color: var(--kan-accent);
  color: white;
}

.badge-theory {
  background-color: #7f58d1;
  color: white;
}

/* Code output styling - aligned with color palette */
.output-area {
  background-color: #f8f9fa;
  border: 1px solid rgba(74, 111, 227, 0.2);
  border-radius: 6px;
  padding: 15px;
  margin-top: -20px;
  margin-bottom: 20px;
  position: relative;
  box-shadow: 0 2px 10px rgba(74, 111, 227, 0.05);
}

.output-area::before {
  content: "Output";
  position: absolute;
  top: -10px;
  left: 15px;
  background: linear-gradient(to right, var(--kan-primary), var(--kan-accent));
  color: white;
  padding: 2px 10px;
  font-size: 12px;
  border-radius: 3px;
  font-weight: 600;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

/* Dark mode output styling */
html[data-theme="dark"] .output-area {
  background-color: #2d3748;
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #e2e8f0;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

html[data-theme="dark"] .output-area::before {
  background: linear-gradient(to right, #4c6ef5, #8c54ff);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

/* Example cards */
.example-card {
  border: 1px solid var(--kan-border);
  border-radius: 8px;
  padding: 20px;
  margin: 30px 0;
  background-color: white;
  box-shadow: 0 2px 8px var(--kan-shadow);
}

/* Dark mode example cards */
html[data-theme="dark"] .example-card {
  background-color: #2d3748;
  border-color: var(--kan-border);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.example-card h4 {
  margin-top: 0;
  border-bottom: 2px solid var(--kan-primary);
  padding-bottom: 10px;
  display: inline-block;
}

/* Equation numbering */
.math.numbered {
  position: relative;
  padding-right: 40px;
}

.math.numbered::after {
  content: attr(data-number);
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: #6c757d;
  font-size: 14px;
}

/* Print optimization */
@media print {
  .wy-nav-side {
    display: none;
  }
  
  .wy-nav-content-wrap {
    margin-left: 0;
  }
  
  .wy-breadcrumbs {
    display: none;
  }
}

/* Testimonial cards - dark mode support */
html[data-theme="dark"] .testimonial-card {
  background-color: #2d3748 !important;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

html[data-theme="dark"] .testimonial-card p {
  color: #a0aec0 !important;
}

html[data-theme="dark"] .testimonial-card div {
  color: var(--kan-primary) !important;
}